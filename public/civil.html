<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Civil Engineering â€” SHPE</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body class="page-civil">
    <header class="site-header">
      <div class="container nav-wrap">
        <a class="logo" href="/">SHPE</a>
        <nav class="main-nav">
          <a class="nav-btn" href="/">Home</a>
          <a class="nav-btn" href="/about">About</a>
          <a class="nav-btn" href="/join">Join</a>
        </nav>
      </div>
    </header>

    <main class="major-page container">
      <header style="margin-bottom:18px">
        <h1>Civil Engineering</h1>
        <p class="muted">Infrastructure, structural design, environmental engineering, and construction management.</p>
      </header>

      <section>
        <h2>Overview</h2>
        <p>Use this page to outline degree requirements, sample courses, and career paths for Civil Engineering. Replace this text with your content.</p>
      </section>

      <section>
        <h2>Roadmap</h2>
        <ul>
          <li>Year 1â€“2: General education and intro calculus/physics</li>
          <li>Year 2â€“3: Core engineering math & statics</li>
          <li>Year 3â€“4: Structural, geotech, and senior design</li>
        </ul>
      </section>

      <section>
        <h2>Transfer & Partners</h2>
        <p>Add transfer agreements and partner universities here.</p>
      </section>

      <section>
        <h2>Certifications & Tools</h2>
        <p>List common certifications (FE/EIT), software (AutoCAD, Civil 3D), and learning resources.</p>
      </section>

      <section>
        <h2>Resources</h2>
        <ul>
          <li>Advising contacts</li>
          <li>Sample course maps</li>
          <li>Clubs and labs</li>
        </ul>
      </section>

      <!-- Interactive circle menu -->
      <section id="civil-interactive" style="margin-bottom:36px; text-align:center">
        <div class="circle-wrapper">
          <button class="circle" id="civil-circle-main">Learn More</button>
          <div class="circle-buttons" id="civil-circle-buttons" aria-hidden="true">
            <button class="circle-btn" data-target="civil-overview">Overview</button>
            <button class="circle-btn" data-target="civil-roadmap">Roadmap</button>
            <button class="circle-btn" data-target="civil-transfer">Transfer</button>
            <button class="circle-btn" data-target="civil-certs">Certs & Tools</button>
            <button class="circle-btn" data-target="civil-resources">Resources</button>
          </div>
        </div>

        <div class="bio-panels">
          <div id="civil-overview" class="bio-panel">
            <h3>Overview</h3>
            <p>Civil engineering involves designing, building, and maintaining infrastructure that serves the public. Engineers work on projects from roads and bridges to water systems and sustainable communities.</p>
          </div>

          <div id="civil-roadmap" class="bio-panel">
            <h3>Roadmap</h3>
            <ul>
              <li><strong>Foundations:</strong> Calculus, physics, chemistry, surveying basics</li>
              <li><strong>Core:</strong> Statics, dynamics, materials, structural analysis</li>
              <li><strong>Advanced:</strong> Design projects, geotechnical, water resources, capstone</li>
            </ul>
          </div>

          <div id="civil-transfer" class="bio-panel">
            <h3>Transfer & Partners</h3>
            <p>Estrella Mountain Community College partners with universities to provide seamless transfer pathways for civil engineering students.</p>
            <a href="https://www.estrellamountain.edu/university-transfer" target="_blank">View Transfer Pathways</a>
          </div>

          <div id="civil-certs" class="bio-panel">
            <h3>Certifications & Tools</h3>
            <p><strong>Key tools:</strong> AutoCAD, Civil 3D, STAAD.Pro, surveying software.</p>
            <p><strong>Certifications:</strong> Professional Engineering (PE), Fundamentals of Engineering (FE).</p>
          </div>

          <div id="civil-resources" class="bio-panel">
            <h3>Resources</h3>
            <ul>
              <li>Design labs</li>
              <li>Professional societies</li>
            </ul>
          </div>
        </div>
      </section>

      <section style="margin-top: 48px; text-align: center;">
        <h2>Subfields</h2>
        <div class="subfields-grid">
          <button class="subfield-bubble" data-field="structural">Structural<br>Engineering</button>
          <button class="subfield-bubble" data-field="geotech">Geotechnical<br>Engineering</button>
          <button class="subfield-bubble" data-field="transport">Transportation<br>Engineering</button>
          <button class="subfield-bubble" data-field="env-civil">Environmental<br>Engineering</button>
          <button class="subfield-bubble" data-field="water">Water<br>Resources</button>
          <button class="subfield-bubble" data-field="construction">Construction<br>Management</button>
        </div>

        <div class="subfield-panels">
          <div id="structural" class="subfield-panel">
            <h3>Structural Engineering</h3>
            <p>Design and analysis of buildings, bridges, and other structures to ensure safety and functionality. Structural engineers use advanced software and materials science to create efficient, cost-effective structures.</p>
            <strong>Top Companies:</strong>
            <p>AECOM, Bechtel, Jacobs Engineering, CH2M Hill</p>
          </div>

          <div id="geotech" class="subfield-panel">
            <h3>Geotechnical Engineering</h3>
            <p>Study of soil and rock properties for foundation design, slope stability, and underground construction. Geotechnical engineers implement site investigation and soil improvement techniques for safe construction.</p>
            <strong>Top Companies:</strong>
            <p>Fugro, Golder Associates, SoilVision Systems, Stantec</p>
          </div>

          <div id="transport" class="subfield-panel">
            <h3>Transportation Engineering</h3>
            <p>Planning and design of roadways, highways, transit systems, and traffic management solutions. Transportation engineers optimize flow, safety, and sustainability of transportation networks.</p>
            <strong>Top Companies:</strong>
            <p>HNTB, Parsons, Atkins, Aecom, Louis Berger</p>
          </div>

          <div id="env-civil" class="subfield-panel">
            <h3>Environmental Engineering</h3>
            <p>Design of water treatment plants, wastewater systems, and air quality management infrastructure. Environmental engineers develop solutions for sustainable urban development and pollution control.</p>
            <strong>Top Companies:</strong>
            <p>Veolia, Suez, Black & Veatch, HDR, AECOM</p>
          </div>

          <div id="water" class="subfield-panel">
            <h3>Water Resources Engineering</h3>
            <p>Management and design of water supply, flood control, and dam systems. Water resources engineers develop sustainable solutions for water availability and protection against natural disasters.</p>
            <strong>Top Companies:</strong>
            <p>Bureau of Reclamation, U.S. Army Corps of Engineers, CH2M Hill, Water Specialties</p>
          </div>

          <div id="construction" class="subfield-panel">
            <h3>Construction Management</h3>
            <p>Oversight of project planning, scheduling, budgeting, and execution of construction projects. Construction managers ensure on-time delivery, quality standards, and safety compliance throughout project lifecycle.</p>
            <strong>Top Companies:</strong>
            <p>Turner Construction, Bechtel, McCarthy Holdings, Skanska</p>
          </div>
        </div>
      </section>

      <script>
        // Circle menu toggle
        const civilCircleMain = document.getElementById('civil-circle-main');
        const civilCircleButtons = document.getElementById('civil-circle-buttons');
        
        if (civilCircleMain && civilCircleButtons) {
          civilCircleMain.addEventListener('click', () => {
            const isOpen = civilCircleButtons.classList.toggle('open');
            civilCircleButtons.setAttribute('aria-hidden', (!isOpen).toString());
          });

          // Circle button click handlers
          document.querySelectorAll('#civil-interactive .circle-btn').forEach(btn => {
            btn.addEventListener('click', function() {
              const targetId = this.getAttribute('data-target');
              if (targetId) {
                document.querySelectorAll('.bio-panel').forEach(p => p.classList.remove('active'));
                const targetPanel = document.getElementById(targetId);
                if (targetPanel) targetPanel.classList.add('active');
              }
            });
          });
        }

        // Subfield panel toggle
        document.querySelectorAll('.subfield-bubble').forEach(bubble => {
          bubble.addEventListener('click', function() {
            const targetId = this.getAttribute('data-field');
            const targetPanel = document.getElementById(targetId);
            
            // Close all other panels
            document.querySelectorAll('.subfield-panel').forEach(panel => {
              panel.classList.remove('active');
            });
            document.querySelectorAll('.subfield-bubble').forEach(btn => {
              btn.classList.remove('active');
            });
            
            // Open target panel
            if (targetPanel) {
              targetPanel.classList.add('active');
              this.classList.add('active');
            }
          });
        });
      </script>

      <!-- SHPE Chat Area -->
      <section style="margin-top: 64px; text-align: center;">
        <h2>SHPE AI Chat</h2>
        <p style="color: var(--text-muted); margin-bottom: 24px;">Ask questions about Civil Engineering and get AI-powered insights.</p>
        <div style="max-width: 850px; margin: 0 auto;">
          <button class="button" style="margin-bottom: 16px;" onclick="toggleChat()">ðŸ’¬ Open Chat</button>
          <div id="chat-panel" class="ai-panel">
            <div class="ai-chat" id="chat-messages">
              <div class="ai-msg-container">
                <div class="ai-msg bot">Welcome to SHPE AI Chat! ðŸ¤– Ask me about civil engineering careers, skills, innovations, and opportunities.</div>
              </div>
            </div>
            <div class="ai-form">
              <input type="text" placeholder="Ask about civil engineering..." id="chat-input" onkeypress="handleChatInput(event)">
              <button onclick="sendChatMessage()">Send</button>
            </div>
          </div>
        </div>
      </section>

      <script>
        function toggleChat() {
          const panel = document.getElementById('chat-panel');
          panel.classList.toggle('open');
        }

        function deleteMessage(element) {
          element.closest('.ai-msg-container').remove();
        }

        async function sendChatMessage() {
          const input = document.getElementById('chat-input');
          const message = input.value.trim();
          if (message) {
            const messagesDiv = document.getElementById('chat-messages');
            
            const userContainer = document.createElement('div');
            userContainer.className = 'ai-msg-container';
            const userMsg = document.createElement('div');
            userMsg.className = 'ai-msg user';
            userMsg.textContent = message;
            const userDeleteBtn = document.createElement('button');
            userDeleteBtn.className = 'msg-delete-btn';
            userDeleteBtn.innerHTML = '&times;';
            userDeleteBtn.onclick = function() { deleteMessage(this); };
            userContainer.appendChild(userMsg);
            userContainer.appendChild(userDeleteBtn);
            messagesDiv.appendChild(userContainer);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            input.value = '';

            try {
              const response = await fetch(`/api/chat?q=${encodeURIComponent(message)}&major=civil`);
              const data = await response.json();
              
              const botContainer = document.createElement('div');
              botContainer.className = 'ai-msg-container';
              const botMsg = document.createElement('div');
              botMsg.className = 'ai-msg bot';
              botMsg.textContent = data.answer || 'I can help you learn about Civil Engineering!';
              const botDeleteBtn = document.createElement('button');
              botDeleteBtn.className = 'msg-delete-btn';
              botDeleteBtn.innerHTML = '&times;';
              botDeleteBtn.onclick = function() { deleteMessage(this); };
              botContainer.appendChild(botMsg);
              botContainer.appendChild(botDeleteBtn);
              messagesDiv.appendChild(botContainer);
              messagesDiv.scrollTop = messagesDiv.scrollHeight;
            } catch (err) {
              console.error('Chat error:', err);
            }
          }
        }

        function handleChatInput(event) {
          if (event.key === 'Enter') sendChatMessage();
        }
      </script>
  </body>
</html>
